/*! For license information please see module.js.LICENSE.txt */
define(["@grafana/data","react","emotion","moment","@grafana/ui"],(function(e,t,n,r,i){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=5)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=i},function(e,t,n){"use strict";n.r(t);var r=n(0);function i(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var a,o,l,u,s=n(1),c=n.n(s),d=n(2),f=n(4),p=n(3),h=n.n(p),b=function(e,t,n,r){this.time=h()(e).utc(),this.value=h.a.duration(t,r),this.name=n,this.endTime=h()(e).utc().add(this.value)},m=Object(f.stylesFactory)((function(){return{wrapper:Object(d.css)(o||(o=i(["\n      position: relative;\n    "],["\n      position: relative;\n    "]))),svg:Object(d.css)(l||(l=i(["\n      position: absolute;\n      top: 0;\n      left: 0;\n    "],["\n      position: absolute;\n      top: 0;\n      left: 0;\n    "]))),textBox:Object(d.css)(u||(u=i(["\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      padding: 10px;\n    "],["\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      padding: 10px;\n    "])))}}));n.d(t,"plugin",(function(){return v}));var v=new r.PanelPlugin((function(e){var t,n,o=e.options,l=e.data,u=e.width,s=e.height,p=Object(f.useTheme)(),h=m();switch(o.color){case"red":t=p.palette.redBase,n=p.palette.redShade;break;case"green":t=p.palette.greenBase,n=p.palette.greenShade;break;case"blue":t=p.palette.blue95,n=p.palette.blue80}if(0===l.series.length)throw new Error("Your query delivered no data.");if(1!==l.series.length)throw new Error("You need exactly 1 time series for this plugin to work.");var v=l.series[0];if(2!==v.fields.filter((function(e){return[r.FieldType.time,r.FieldType.number].includes(null==e?void 0:e.type)})).length)throw new Error('You need at least a field of type "time" and a field of type "number" for this plugin to work.');for(var g=v.fields.filter((function(e){return e.type===r.FieldType.time}))[0],w=v.fields.filter((function(e){return e.type===r.FieldType.number}))[0],x=v.fields.filter((function(e){return e.type===r.FieldType.string}))[0],y=[],O=0;O<v.fields[0].values.length;O++)y.push(new b(g.values.get(O),w.values.get(O),x?x.values.get(O):"",o.valueUnit));var j=y.map((function(e){return e.endTime.unix()})).reduce((function(e,t){return e>t?e:t}));y.sort((function(e,t){return t.time.milliseconds()-e.time.milliseconds()}));var S=y[0].time.unix(),B=j-S;return c.a.createElement("div",{className:Object(d.cx)(h.wrapper,Object(d.css)(a||(a=i(["\n          width: ","px;\n          height: ","px;\n        "],["\n          width: ","px;\n          height: ","px;\n        "])),u,s))},c.a.createElement("svg",{className:h.svg,width:u,height:s,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 "+u+" "+s},c.a.createElement("g",null,y.map((function(e,r){var i=s/y.length-2,a=o.showInlineBarLabels?c.a.createElement("text",{x:(e.time.unix()-S)/B*u,height:i,y:r*(i+2)+i-2,fontSize:""+Math.floor(i),fill:p.colors.text},e.name," ",o.showDurationInLabels?"("+e.value.asSeconds().toFixed(1)+" "+o.valueUnit+")":""):void 0;return c.a.createElement("g",{fill:n,key:r},c.a.createElement("rect",{x:(e.time.unix()-S)/B*u,height:i,y:r*(i+2),width:e.value.asSeconds()/B*u,stroke:t,strokeWidth:"1"}),a)})))))})).setPanelOptions((function(e){return e.addBooleanSwitch({path:"showInlineBarLabels",name:"Show inline bar labels",defaultValue:!1}).addBooleanSwitch({path:"showDurationInLabels",name:"Show duration in bar labels",defaultValue:!0,showIf:function(e){return e.showInlineBarLabels}}).addRadio({path:"color",name:"Bar color",defaultValue:"red",settings:{options:[{value:"red",label:"Red"},{value:"green",label:"Green"},{value:"blue",label:"Blue"}]}}).addRadio({path:"valueUnit",name:"Value Time Unit",defaultValue:"s",settings:{options:[{value:"s",label:"seconds (s)"}]}})}))}])}));
//# sourceMappingURL=module.js.map